## 1. 概要 (Overview)

### 1.1 功能单元定义 (Functional Unit Definition)

- **功能单元 (Unit):** 单位管理 (Unit Management)
- **ISA-95 Level 3 活动:** 产品定义管理 (Product Definition Management)
- **核心价值:** 建立全厂统一的单位标准，为物料管理提供基础数据支撑。

### 1.2 用户故事 (User Stories)

- As a [数据管理员], I want [定义单位], so that [物料管理时可以指定单位]。

## 2. 需求 (Requirement)

### 2.1 单位管理

- **[R1] 普遍性 (Ubiquitous):**
  - The [System] shall [允许查看单位列表]，字段包含：
    - `unit_code` - 唯一标识
    - `unit_name` - 名称（如 kg）

## 3. 统一命名空间 (UNS) & 数据模型 (Data Models)

### 3.1 核心数据模型 (Payload Schemas)

#### 3.1.1 依赖模型 (Inputs)

无，该模块是最基础的定义。

#### 3.1.2 生成模型 (Generated Models / Outputs)

- **模型: Unit (单位)**
  - Topic: `Demo/ERP/State/unit_of_measure`
  - 数据格式示例：
    ```json
    {
      "unit_code": "01",
      "unit_name": "kg"
    }
    ```
  
  - **字段说明：**
    - `unit_code`: 单位编码（唯一标识）
    - `unit_name`: 单位名称

### 3.2 模拟数据

| unit_code | unit_name |
|-----------|-----------|
| 01        | kg        |
| 02        | pcs       |

## 4. 事件流 (Event Flow) (Logic Layer)

### 4.1 单位同步

**触发器:** 定时查询 ERP HTTP 单位接口

**处理逻辑:**
1. 校验 `unit_code`、`unit_name` 唯一性，防止不同单位共用 name
2. Upsert 数据库

**输出:**
- 发布消息至 `Demo/ERP/State/unit_of_measure`

## 5. 交互界面 (UI Layer)

### 5.1 界面布局

**单位列表页：**

- **顶部工具栏：**
  - 搜索框（支持按 `unit_code/unit_name` 搜索）
  - 新增按钮

- **主列表 (Master List):**
  - **字段列：** 单位编码、单位名称
  - **动作列：** 编辑、删除
